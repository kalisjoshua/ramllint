<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: log.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: log.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

var typeOf = require('./typeOf.js');

// filter based on level
function filterEntries(level, entry) {

  return level.indexOf(entry.level) !== -1;
}

// bind level methods for instances
function instanceLevelMethods(addEntry, name) {
  this[name] = addEntry.bind(null, name);
}

/**
  * @private
  * @description
  * check for argument definition
  * @arg {mixed} arg - any argument value
  * @returns {boolean} whether the argument was defined as anything.
  */
function isDef(arg) {

  return arg !== null &amp;&amp; arg !== undefined;
}

/**
  * @constructor
  * @description
  * Creates a new instance for logging linting problems.
  * @example
  * var logger = new Log();
  * logger.error('root', 'api_version', 'RAML document must provide api_version', 'RAML');
  * logger.read(); // returns an array of all logged entries
  */
function Log() {
  var stack;

  /**
    * @typedef {object} LogEntry
    * @prop {string} code - the unique identifier for the rule
    * @prop {string} level - the level of error: `error`, `warning`, or `info`
    * @prop {string} message - the "helpful" message to indicate the problem
    * @prop {string} locale - the resource location within the RAML document
    * @prop {string} section - the section "type" within the AST
    */

  /**
    * @protected
    * @description
    * Primary method for logging, made available as instance methods named for
    * the levels of logging available; those methods have the first argument
    * provided automatically.
    * @arg {string} level - automatically provided, will never be passed by user
    * @arg {string} section - the section within the document entry originated
    * @arg {string} code - uniquge identifier of the rule for the entry
    * @arg {string} message - the (possibly) helpful message to the user
    * @arg {string} locale - the helper string to identify where in the RAML doc
    * @throws {MissingArgumentException} If any argument is not provided
    * @example
    * myLogger.error('resource', 'resource_desc', 'need a description', 'GET http://example.com/resource');
    * @example
    * myLogger.warning('resource', 'resource_desc', 'need a description', 'GET http://example.com/resource');
    * @example
    * myLogger.info('resource', 'resource_desc', 'need a description', 'GET http://example.com/resource');
    */
  function addEntry(level, section, code, message, locale) {
    if ([section, code, message, locale].every(isDef)) {
      stack
        .push({
          code: code,
          level: level,
          message: message,
          rule: locale,
          section: section
        });
    } else {
      throw new Error('Missing arguments calling log.$().'.replace('$', level));
    }
  }

  /**
    * @function error
    * @memberOf Log
    * @instance
    * @description
    * Instance method for logging `error` level entries; calls {@link Log~addEntry}
    * with first argument satisfied, and passing along addition arguments.
    * @see {@link Log~addEntry}
    */

  /**
    * @function warning
    * @memberOf Log
    * @instance
    * @description
    * Instance method for logging `warning` level entries; calls {@link Log~addEntry}
    * with first argument satisfied, and passing along addition arguments.
    * @see {@link Log~addEntry}
    */

  /**
    * @function info
    * @memberOf Log
    * @instance
    * @description
    * Instance method for logging `info` level entries; calls {@link Log~addEntry}
    * with first argument satisfied, and passing along addition arguments.
    * @see {@link Log~addEntry}
    */
  // add methods to public-facing api for each of these
  this.getLevels()
    .forEach(instanceLevelMethods.bind(this, addEntry));

  /**
    * @description
    * Reset the list, of entries, to an empty array.
    */
  this.empty = function emptyStack() {
    stack = [];
  };

  /**
    * @description
    * Retrieve the entries; for the level indicated, or all of them.
    * @arg {string} [level] - if provided, only include entries that match
    * @returns {LogEntry[]} An array of {@link LogEntry}
    */
  this.read = function readLog(level) {

    return !level ? stack : (stack
      .filter(filterEntries.bind(null, level)));
  };

  this.empty();
}

/**
  * @description
  * This function provided to supply an order list of logging levels in descending
  * order of severity. This will allow the ability to retrieve log entries based
  * on criteria more complex than a simple string match; 'filter the log for entries
  * (greater|lesser) than (or equal to) a given level'.
  * @returns {array} a list of all logging levels; in descending order of severity
  * @example
  * // this is the constructor (function); not an instance of it
  * Log.getLevels(); // returns ['error', 'warning', 'info']
  */
Log.getLevels = function getLevels() {

  return ['error', 'warning', 'info'];
};

/**
  * @see {@link Log.getLevels}
  * @example
  * myLoggerInstance.getLevels(); // returns ['error', 'warning', 'info']
  */
Log.prototype.getLevels = Log.getLevels;

/* istanbul ignore else */
if (typeOf(exports, 'object')) {
  module.exports = Log;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Linter.html">Linter</a></li><li><a href="Log.html">Log</a></li><li><a href="Rules.html">Rules</a></li></ul><h3>Global</h3><ul><li><a href="global.html#typeOf">typeOf</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
